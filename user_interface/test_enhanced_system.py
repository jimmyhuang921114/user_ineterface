#!/usr/bin/env python3 """  -  """ import requests import json import time BASE_URL = "http://localhost:8000" def test_enhanced_system(): print("  - ") print("=" * 50) time.sleep(2) try: # 1.  print("1.  ...") response = requests.get(f"{BASE_URL}/api/test") if response.status_code == 200: data = response.json() print(f" :  - {data['message']}") print(f"  : {data['system_stats']}") else: print(f" : : {response.status_code}") return # 2.  print("\n2. ...") #  response = requests.get(f"{BASE_URL}/api/medicine/detailed/") if response.status_code == 200: medicine_data = response.json() print(" : ") print(f" : {medicine_data['']['']}") print(f"  : {medicine_data['']['']}") print(f" : {medicine_data['']['']}") else: print(f" : : {response.status_code}") #  response = requests.get(f"{BASE_URL}/api/medicine/search/detailed/") if response.status_code == 200: search_results = response.json() print(f" :  {len(search_results)} ") # 3.  print("\n3. ...") #  response = requests.get(f"{BASE_URL}/api/patients/") if response.status_code == 200: patients = response.json() print(f" :  {len(patients)} ") if patients: patient = patients[0] print(f"  : {patient['name']}, : {patient['age']}") #  new_patient = { "name": "", "age": 30, "gender": "", "phone": "0987654321", "address": "", "medical_history": "", "current_medications": [], "allergies": "" } response = requests.post(f"{BASE_URL}/api/patients/", json=new_patient) if response.status_code == 200: created_patient = response.json() print(f" :  ID: {created_patient['id']}") test_patient_id = created_patient['id'] else: print(f" : : {response.status_code}") test_patient_id = 1 # 4.  print("\n4. ...") #  new_record = { "patient_id": test_patient_id, "visit_date": "2024-01-15T10:30:00", "diagnosis": "", "prescribed_medicines": [" 100mg"], "dosage_instructions": "", "doctor_notes": "" } response = requests.post(f"{BASE_URL}/api/records/", json=new_record) if response.status_code == 200: created_record = response.json() print(f" :  ID: {created_record['id']}") else: print(f" : : {response.status_code}") #  response = requests.get(f"{BASE_URL}/api/records/patient/{test_patient_id}") if response.status_code == 200: records = response.json() print(f" : {len(records)}") # 5. JSON print("\n5. JSON...") export_endpoints = [ ("", "/api/export/medicines/basic"), ("", "/api/export/medicines/detailed"), ("", "/api/export/patients"), ("", "/api/export/records"), ("", "/api/export/complete") ] for name, endpoint in export_endpoints: response = requests.get(f"{BASE_URL}{endpoint}") if response.status_code == 200: export_data = response.json() print(f" : {name}") if 'total_count' in export_data: print(f"  : {export_data['total_count']}") elif 'statistics' in export_data: print(f"  : {export_data['statistics']}") else: print(f" : {name}: {response.status_code}") # 6. JSON print("\n6. JSON...") response = requests.get(f"{BASE_URL}/api/medicine/detailed/") if response.status_code == 200: heart_medicine = response.json() print(" : :") print(f" JSON:") formatted_json = json.dumps(heart_medicine, ensure_ascii=False, indent=2) print(" " + "\n ".join(formatted_json.split("\n")[:15]) + "...") #  with open("heart_medicine_info.json", "w", encoding="utf-8") as f: json.dump(heart_medicine, f, ensure_ascii=False, indent=2) print("   heart_medicine_info.json") print("\n ") print(" ") print("\n :") print(" : http://localhost:8000/Medicine.html") print(" : http://localhost:8000/Patients.html") print(" : http://localhost:8000/Records.html") print("  API: http://localhost:8000/docs") print("\n API:") print(" # ") print(" curl http://localhost:8000/api/medicine/detailed/") print("\n # ") print(" curl http://localhost:8000/api/medicine/search/detailed/") print("\n # ") print(" curl http://localhost:8000/api/export/complete") except requests.exceptions.ConnectionError: print(" : ") print(" : :") print(" python3 enhanced_server.py") except Exception as e: print(f" : : {e}") if __name__ == "__main__": test_enhanced_system()