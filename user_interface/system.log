2025-08-07 06:39:34,351 - ros2_mock - INFO - 啟動模擬ROS2整合...
2025-08-07 06:39:34,351 - ros2_mock - INFO - 初始化模擬ROS2節點...
2025-08-07 06:39:34,352 - ros2_mock - INFO - 模擬ROS2節點初始化完成
2025-08-07 06:39:34,352 - ros2_mock - INFO - 模擬ROS2整合啟動成功
2025-08-07 06:40:17,805 - ros2_mock - INFO - 啟動模擬ROS2整合...
2025-08-07 06:40:17,805 - ros2_mock - INFO - 初始化模擬ROS2節點...
2025-08-07 06:40:17,806 - ros2_mock - INFO - 模擬ROS2節點初始化完成
2025-08-07 06:40:17,806 - ros2_mock - INFO - 模擬ROS2整合啟動成功
2025-08-07 06:40:45,148 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name=None medicine_id=None include_detailed=False
2025-08-07 06:40:45,156 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:40:45,156 - hospital_system - INFO - 基本藥物服務完成，返回 5 個藥物
2025-08-07 06:40:45,158 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name='阿司匹林' medicine_id=None include_detailed=False
2025-08-07 06:40:45,159 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:40:45,159 - hospital_system - INFO - 基本藥物服務完成，返回 1 個藥物
2025-08-07 06:40:45,162 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name=None medicine_id=4 include_detailed=False
2025-08-07 06:40:45,163 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:40:45,163 - hospital_system - INFO - 基本藥物服務完成，返回 1 個藥物
2025-08-07 06:40:45,165 - hospital_system - INFO - ROS2 詳細藥物服務請求: medicine_name=None medicine_id=None include_detailed=False
2025-08-07 06:40:45,168 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:40:45,168 - hospital_system - INFO - 詳細藥物服務完成，返回 5 個詳細資訊
2025-08-07 06:40:45,170 - hospital_system - INFO - ROS2 詳細藥物服務請求: medicine_name='布洛芬' medicine_id=None include_detailed=False
2025-08-07 06:40:45,171 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:40:45,171 - hospital_system - INFO - 詳細藥物服務完成，返回 1 個詳細資訊
2025-08-07 06:40:45,173 - hospital_system - INFO - ROS2 詳細藥物服務請求: medicine_name='維他命C' medicine_id=None include_detailed=True
2025-08-07 06:40:45,174 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:40:45,174 - hospital_system - INFO - 詳細藥物服務完成，返回 1 個詳細資訊
2025-08-07 06:40:45,177 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name='胃藥' medicine_id=None include_detailed=False
2025-08-07 06:40:45,177 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:40:45,177 - hospital_system - INFO - 基本藥物服務完成，返回 1 個藥物
2025-08-07 06:40:45,179 - hospital_system - INFO - ROS2 詳細藥物服務請求: medicine_name='胃藥' medicine_id=None include_detailed=False
2025-08-07 06:40:45,180 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:40:45,180 - hospital_system - INFO - 詳細藥物服務完成，返回 1 個詳細資訊
2025-08-07 06:41:07,955 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name=None medicine_id=None include_detailed=False
2025-08-07 06:41:07,956 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:41:07,956 - hospital_system - INFO - 基本藥物服務完成，返回 5 個藥物
2025-08-07 06:41:07,958 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name='阿司匹林' medicine_id=None include_detailed=False
2025-08-07 06:41:07,959 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:41:07,959 - hospital_system - INFO - 基本藥物服務完成，返回 1 個藥物
2025-08-07 06:41:07,961 - hospital_system - INFO - ROS2 詳細藥物服務請求: medicine_name=None medicine_id=None include_detailed=False
2025-08-07 06:41:07,962 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:41:07,962 - hospital_system - INFO - 詳細藥物服務完成，返回 5 個詳細資訊
2025-08-07 06:41:07,965 - hospital_system - INFO - ROS2 詳細藥物服務請求: medicine_name='布洛芬' medicine_id=None include_detailed=False
2025-08-07 06:41:07,966 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:41:07,966 - hospital_system - INFO - 詳細藥物服務完成，返回 1 個詳細資訊
2025-08-07 06:41:07,968 - hospital_system - INFO - ROS2 詳細藥物服務請求: medicine_name='維他命C' medicine_id=None include_detailed=True
2025-08-07 06:41:07,969 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:41:07,969 - hospital_system - INFO - 詳細藥物服務完成，返回 1 個詳細資訊
2025-08-07 06:41:07,971 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name='胃藥' medicine_id=None include_detailed=False
2025-08-07 06:41:07,972 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:41:07,972 - hospital_system - INFO - 基本藥物服務完成，返回 1 個藥物
2025-08-07 06:41:07,974 - hospital_system - INFO - ROS2 詳細藥物服務請求: medicine_name='胃藥' medicine_id=None include_detailed=False
2025-08-07 06:41:07,974 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 06:41:07,974 - hospital_system - INFO - 詳細藥物服務完成，返回 1 個詳細資訊
2025-08-07 06:41:07,977 - hospital_system - INFO - ROS2請求查看所有待處理訂單
2025-08-07 06:41:07,978 - hospital_system - INFO - 找到 0 個待處理訂單
2025-08-07 06:52:30,834 - hospital_system - INFO - 開始創建新處方籤
2025-08-07 06:52:30,834 - hospital_system - INFO - 處方包含 1 種藥物
2025-08-07 06:52:30,861 - hospital_system - ERROR - 創建處方籤失敗: (sqlite3.IntegrityError) NOT NULL constraint failed: prescriptions.patient_id
[SQL: INSERT INTO prescriptions (patient_name, patient_id, doctor_name, diagnosis, status, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)]
[parameters: ('測試患者', None, '測試醫生', None, 'pending', '2025-08-07 06:52:30.844385', '2025-08-07 06:52:30.844400')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-07 06:52:30,862 - hospital_system - ERROR - HTTP錯誤: 400 - 創建失敗: (sqlite3.IntegrityError) NOT NULL constraint failed: prescriptions.patient_id
[SQL: INSERT INTO prescriptions (patient_name, patient_id, doctor_name, diagnosis, status, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?)]
[parameters: ('測試患者', None, '測試醫生', None, 'pending', '2025-08-07 06:52:30.844385', '2025-08-07 06:52:30.844400')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-07 06:53:42,910 - ros2_mock - INFO - 啟動模擬ROS2整合...
2025-08-07 06:53:42,910 - ros2_mock - INFO - 初始化模擬ROS2節點...
2025-08-07 06:53:42,911 - ros2_mock - INFO - 模擬ROS2節點初始化完成
2025-08-07 06:53:42,911 - ros2_mock - INFO - 模擬ROS2整合啟動成功
2025-08-07 06:53:45,483 - hospital_system - INFO - 開始創建新處方籤
2025-08-07 06:53:45,483 - hospital_system - INFO - 處方包含 1 種藥物
2025-08-07 06:53:45,496 - hospital_system - INFO - 處方籤基本資料已創建，ID: 1, 患者ID: P625483
2025-08-07 06:53:45,501 - hospital_system - INFO - 處方籤創建完成，共添加 1 種藥物
2025-08-07 06:53:45,503 - hospital_system - INFO - 扣減庫存: 阿司匹林 減少 2 (從 100 變為 98)
2025-08-07 06:53:45,510 - hospital_system - INFO - ROS2可用，準備創建訂單
2025-08-07 06:53:45,510 - ros2_mock - INFO - 訂單已加入佇列: ORDER_0001
2025-08-07 06:53:45,510 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: ORDER_0001
2025-08-07 06:53:45,510 - hospital_system - INFO - ROS2訂單已創建: ORDER_0001
2025-08-07 06:53:45,911 - ros2_mock - INFO - 開始處理訂單: ORDER_0001
2025-08-07 06:53:45,911 - ros2_mock - INFO - 驗證處方籤中...
2025-08-07 06:53:47,911 - ros2_mock - INFO - 定位藥物中...
2025-08-07 06:53:50,911 - ros2_mock - INFO - 移動機器人中...
2025-08-07 06:53:54,912 - ros2_mock - INFO - 分配藥物中...
2025-08-07 06:53:59,912 - ros2_mock - INFO - 包裝藥物中...
2025-08-07 06:54:02,912 - ros2_mock - INFO - 品質檢查中...
2025-08-07 06:54:04,917 - hospital_system - INFO - ROS2標記訂單完成
2025-08-07 06:54:04,920 - ros2_mock - INFO - 處方籤 1 狀態已自動更新為 completed
2025-08-07 06:54:04,921 - ros2_mock - INFO - 訂單處理完成
2025-08-07 06:54:21,874 - hospital_system - ERROR - HTTP錯誤: 400 - 創建失敗: (sqlite3.IntegrityError) NOT NULL constraint failed: medicine_basic.name
[SQL: INSERT INTO medicine_basic (name, amount, position, manufacturer, dosage, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (None, 0, None, None, None, 1, '2025-08-07 06:54:21.873191', '2025-08-07 06:54:21.873195')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-07 06:55:05,980 - hospital_system - INFO - 開始獲取基本藥物列表
2025-08-07 06:55:05,982 - hospital_system - INFO - 基本藥物列表構建完成，共 5 種藥物
2025-08-07 06:55:05,982 - hospital_system - INFO - 藥物資料已發布到ROS2
2025-08-07 06:55:16,037 - hospital_system - ERROR - HTTP錯誤: 400 - 創建失敗: (sqlite3.IntegrityError) NOT NULL constraint failed: medicine_basic.name
[SQL: INSERT INTO medicine_basic (name, amount, position, manufacturer, dosage, is_active, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (None, 0, None, None, None, 1, '2025-08-07 06:55:16.037281', '2025-08-07 06:55:16.037285')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-07 06:55:58,487 - ros2_mock - INFO - 啟動模擬ROS2整合...
2025-08-07 06:55:58,487 - ros2_mock - INFO - 初始化模擬ROS2節點...
2025-08-07 06:55:58,488 - ros2_mock - INFO - 模擬ROS2節點初始化完成
2025-08-07 06:55:58,488 - ros2_mock - INFO - 模擬ROS2整合啟動成功
2025-08-07 06:56:01,132 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:05,984 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name='阿司匹林' medicine_id=None include_detailed=False
2025-08-07 07:02:05,986 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:05,986 - hospital_system - INFO - 基本藥物服務完成，返回 1 個藥物
2025-08-07 07:02:06,489 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name='布洛芬' medicine_id=None include_detailed=False
2025-08-07 07:02:06,490 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:06,490 - hospital_system - INFO - 基本藥物服務完成，返回 1 個藥物
2025-08-07 07:02:06,993 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name='維他命C' medicine_id=None include_detailed=False
2025-08-07 07:02:06,994 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:06,994 - hospital_system - INFO - 基本藥物服務完成，返回 1 個藥物
2025-08-07 07:02:07,497 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name='胃藥' medicine_id=None include_detailed=False
2025-08-07 07:02:07,498 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:07,498 - hospital_system - INFO - 基本藥物服務完成，返回 1 個藥物
2025-08-07 07:02:08,001 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name='感冒糖漿' medicine_id=None include_detailed=False
2025-08-07 07:02:08,001 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:08,001 - hospital_system - INFO - 基本藥物服務完成，返回 1 個藥物
2025-08-07 07:02:08,504 - hospital_system - INFO - ROS2 詳細藥物服務請求: medicine_name='阿司匹林' medicine_id=None include_detailed=False
2025-08-07 07:02:08,506 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:08,506 - hospital_system - INFO - 詳細藥物服務完成，返回 1 個詳細資訊
2025-08-07 07:02:09,009 - hospital_system - INFO - ROS2 詳細藥物服務請求: medicine_name='布洛芬' medicine_id=None include_detailed=False
2025-08-07 07:02:09,010 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:09,010 - hospital_system - INFO - 詳細藥物服務完成，返回 1 個詳細資訊
2025-08-07 07:02:09,513 - hospital_system - INFO - ROS2 詳細藥物服務請求: medicine_name='維他命C' medicine_id=None include_detailed=False
2025-08-07 07:02:09,514 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:09,514 - hospital_system - INFO - 詳細藥物服務完成，返回 1 個詳細資訊
2025-08-07 07:02:10,017 - hospital_system - INFO - 開始創建新處方籤
2025-08-07 07:02:10,017 - hospital_system - INFO - 處方包含 2 種藥物
2025-08-07 07:02:10,026 - hospital_system - INFO - 處方籤基本資料已創建，ID: 2, 患者ID: P130017
2025-08-07 07:02:10,030 - hospital_system - INFO - 處方籤創建完成，共添加 2 種藥物
2025-08-07 07:02:10,032 - hospital_system - INFO - 扣減庫存: 阿司匹林 減少 3 (從 98 變為 95)
2025-08-07 07:02:10,033 - hospital_system - INFO - 扣減庫存: 維他命C 減少 2 (從 150 變為 148)
2025-08-07 07:02:10,036 - hospital_system - INFO - ROS2可用，準備創建訂單
2025-08-07 07:02:10,036 - ros2_mock - INFO - 訂單已加入佇列: ORDER_0002
2025-08-07 07:02:10,036 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: ORDER_0002
2025-08-07 07:02:10,036 - hospital_system - INFO - ROS2訂單已創建: ORDER_0002
2025-08-07 07:02:10,531 - ros2_mock - INFO - 開始處理訂單: ORDER_0002
2025-08-07 07:02:10,531 - ros2_mock - INFO - 驗證處方籤中...
2025-08-07 07:02:12,039 - hospital_system - INFO - 開始創建新處方籤
2025-08-07 07:02:12,039 - hospital_system - INFO - 處方包含 2 種藥物
2025-08-07 07:02:12,042 - hospital_system - INFO - 處方籤基本資料已創建，ID: 3, 患者ID: P132039
2025-08-07 07:02:12,046 - hospital_system - INFO - 處方籤創建完成，共添加 2 種藥物
2025-08-07 07:02:12,047 - hospital_system - INFO - 扣減庫存: 布洛芬 減少 1 (從 80 變為 79)
2025-08-07 07:02:12,047 - hospital_system - INFO - 扣減庫存: 胃藥 減少 1 (從 120 變為 119)
2025-08-07 07:02:12,050 - hospital_system - INFO - ROS2可用，準備創建訂單
2025-08-07 07:02:12,050 - ros2_mock - INFO - 訂單已加入佇列: ORDER_0003
2025-08-07 07:02:12,050 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: ORDER_0003
2025-08-07 07:02:12,050 - hospital_system - INFO - ROS2訂單已創建: ORDER_0003
2025-08-07 07:02:12,531 - ros2_mock - INFO - 定位藥物中...
2025-08-07 07:02:14,053 - hospital_system - INFO - 開始創建新處方籤
2025-08-07 07:02:14,053 - hospital_system - INFO - 處方包含 1 種藥物
2025-08-07 07:02:14,056 - hospital_system - INFO - 處方籤基本資料已創建，ID: 4, 患者ID: P134053
2025-08-07 07:02:14,059 - hospital_system - INFO - 處方籤創建完成，共添加 1 種藥物
2025-08-07 07:02:14,059 - hospital_system - INFO - 扣減庫存: 感冒糖漿 減少 1 (從 50 變為 49)
2025-08-07 07:02:14,062 - hospital_system - INFO - ROS2可用，準備創建訂單
2025-08-07 07:02:14,062 - ros2_mock - INFO - 訂單已加入佇列: ORDER_0004
2025-08-07 07:02:14,062 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: ORDER_0004
2025-08-07 07:02:14,062 - hospital_system - INFO - ROS2訂單已創建: ORDER_0004
2025-08-07 07:02:15,531 - ros2_mock - INFO - 移動機器人中...
2025-08-07 07:02:16,065 - hospital_system - INFO - 開始創建新處方籤
2025-08-07 07:02:16,065 - hospital_system - INFO - 處方包含 4 種藥物
2025-08-07 07:02:16,067 - hospital_system - INFO - 處方籤基本資料已創建，ID: 5, 患者ID: P136065
2025-08-07 07:02:16,071 - hospital_system - INFO - 處方籤創建完成，共添加 4 種藥物
2025-08-07 07:02:16,072 - hospital_system - INFO - 扣減庫存: 阿司匹林 減少 5 (從 95 變為 90)
2025-08-07 07:02:16,072 - hospital_system - INFO - 扣減庫存: 布洛芬 減少 3 (從 79 變為 76)
2025-08-07 07:02:16,072 - hospital_system - INFO - 扣減庫存: 維他命C 減少 2 (從 148 變為 146)
2025-08-07 07:02:16,073 - hospital_system - INFO - 扣減庫存: 胃藥 減少 1 (從 119 變為 118)
2025-08-07 07:02:16,076 - hospital_system - INFO - ROS2可用，準備創建訂單
2025-08-07 07:02:16,076 - ros2_mock - INFO - 訂單已加入佇列: ORDER_0005
2025-08-07 07:02:16,076 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: ORDER_0005
2025-08-07 07:02:16,076 - hospital_system - INFO - ROS2訂單已創建: ORDER_0005
2025-08-07 07:02:18,078 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name='阿司匹林' medicine_id=None include_detailed=False
2025-08-07 07:02:18,079 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:18,079 - hospital_system - INFO - 基本藥物服務完成，返回 1 個藥物
2025-08-07 07:02:18,082 - hospital_system - INFO - ROS2 詳細藥物服務請求: medicine_name='布洛芬' medicine_id=None include_detailed=False
2025-08-07 07:02:18,082 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:18,082 - hospital_system - INFO - 詳細藥物服務完成，返回 1 個詳細資訊
2025-08-07 07:02:19,085 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name='阿司匹林' medicine_id=None include_detailed=False
2025-08-07 07:02:19,086 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:19,086 - hospital_system - INFO - 基本藥物服務完成，返回 1 個藥物
2025-08-07 07:02:19,089 - hospital_system - INFO - ROS2 詳細藥物服務請求: medicine_name='布洛芬' medicine_id=None include_detailed=False
2025-08-07 07:02:19,089 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:19,090 - hospital_system - INFO - 詳細藥物服務完成，返回 1 個詳細資訊
2025-08-07 07:02:19,532 - ros2_mock - INFO - 分配藥物中...
2025-08-07 07:02:20,092 - hospital_system - INFO - ROS2 基本藥物服務請求: medicine_name='阿司匹林' medicine_id=None include_detailed=False
2025-08-07 07:02:20,093 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:20,093 - hospital_system - INFO - 基本藥物服務完成，返回 1 個藥物
2025-08-07 07:02:20,096 - hospital_system - INFO - ROS2 詳細藥物服務請求: medicine_name='布洛芬' medicine_id=None include_detailed=False
2025-08-07 07:02:20,097 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 07:02:20,097 - hospital_system - INFO - 詳細藥物服務完成，返回 1 個詳細資訊
2025-08-07 07:02:24,532 - ros2_mock - INFO - 包裝藥物中...
2025-08-07 07:02:27,532 - ros2_mock - INFO - 品質檢查中...
2025-08-07 07:02:29,535 - hospital_system - INFO - ROS2標記訂單完成
2025-08-07 07:02:29,538 - ros2_mock - INFO - 處方籤 2 狀態已自動更新為 completed
2025-08-07 07:02:29,538 - ros2_mock - INFO - 訂單處理完成
2025-08-07 07:02:30,539 - ros2_mock - INFO - 開始處理訂單: ORDER_0003
2025-08-07 07:02:30,539 - ros2_mock - INFO - 驗證處方籤中...
2025-08-07 07:02:32,539 - ros2_mock - INFO - 定位藥物中...
2025-08-07 07:02:35,539 - ros2_mock - INFO - 移動機器人中...
2025-08-07 07:02:39,539 - ros2_mock - INFO - 分配藥物中...
2025-08-07 07:02:44,539 - ros2_mock - INFO - 包裝藥物中...
2025-08-07 07:02:47,540 - ros2_mock - INFO - 品質檢查中...
2025-08-07 07:02:49,542 - hospital_system - INFO - ROS2標記訂單完成
2025-08-07 07:02:49,545 - ros2_mock - INFO - 處方籤 3 狀態已自動更新為 completed
2025-08-07 07:02:49,545 - ros2_mock - INFO - 訂單處理完成
2025-08-07 07:02:50,545 - ros2_mock - INFO - 開始處理訂單: ORDER_0004
2025-08-07 07:02:50,545 - ros2_mock - INFO - 驗證處方籤中...
2025-08-07 07:02:52,545 - ros2_mock - INFO - 定位藥物中...
2025-08-07 07:02:55,546 - ros2_mock - INFO - 移動機器人中...
2025-08-07 07:02:59,546 - ros2_mock - INFO - 分配藥物中...
2025-08-07 07:03:04,546 - ros2_mock - INFO - 包裝藥物中...
2025-08-07 07:03:07,547 - ros2_mock - INFO - 品質檢查中...
2025-08-07 07:03:09,549 - hospital_system - INFO - ROS2標記訂單完成
2025-08-07 07:03:09,551 - ros2_mock - INFO - 處方籤 4 狀態已自動更新為 completed
2025-08-07 07:03:09,551 - ros2_mock - INFO - 訂單處理完成
2025-08-07 07:03:10,551 - ros2_mock - INFO - 開始處理訂單: ORDER_0005
2025-08-07 07:03:10,552 - ros2_mock - INFO - 驗證處方籤中...
2025-08-07 07:03:12,552 - ros2_mock - INFO - 定位藥物中...
2025-08-07 07:03:15,552 - ros2_mock - INFO - 移動機器人中...
2025-08-07 07:03:19,552 - ros2_mock - INFO - 分配藥物中...
2025-08-07 07:03:24,552 - ros2_mock - INFO - 包裝藥物中...
2025-08-07 07:03:27,553 - ros2_mock - INFO - 品質檢查中...
2025-08-07 07:03:29,555 - hospital_system - INFO - ROS2標記訂單完成
2025-08-07 07:03:29,557 - ros2_mock - INFO - 處方籤 5 狀態已自動更新為 completed
2025-08-07 07:03:29,557 - ros2_mock - INFO - 訂單處理完成
2025-08-07 08:01:53,808 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 08:01:53,837 - hospital_system - INFO - 開始創建新處方籤
2025-08-07 08:01:53,837 - hospital_system - INFO - 處方包含 1 種藥物
2025-08-07 08:01:53,842 - hospital_system - INFO - 處方籤基本資料已創建，ID: 6, 患者ID: P713837
2025-08-07 08:01:53,847 - hospital_system - INFO - 處方籤創建完成，共添加 1 種藥物
2025-08-07 08:01:53,849 - hospital_system - INFO - 扣減庫存: 阿司匹林 減少 1 (從 90 變為 89)
2025-08-07 08:01:53,852 - hospital_system - INFO - ROS2可用，準備創建訂單
2025-08-07 08:01:53,853 - ros2_mock - INFO - 訂單已加入佇列: ORDER_0006
2025-08-07 08:01:53,853 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: ORDER_0006
2025-08-07 08:01:53,853 - hospital_system - INFO - ROS2訂單已創建: ORDER_0006
2025-08-07 08:01:54,440 - ros2_mock - INFO - 開始處理訂單: ORDER_0006
2025-08-07 08:01:54,440 - ros2_mock - INFO - 驗證處方籤中...
2025-08-07 08:01:56,440 - ros2_mock - INFO - 定位藥物中...
2025-08-07 08:01:59,441 - ros2_mock - INFO - 移動機器人中...
2025-08-07 08:02:01,269 - hospital_system - INFO - 開始獲取基本藥物列表
2025-08-07 08:02:01,274 - hospital_system - INFO - 基本藥物列表構建完成，共 7 種藥物
2025-08-07 08:02:01,274 - hospital_system - INFO - 藥物資料已發布到ROS2
2025-08-07 08:02:01,314 - hospital_system - INFO - 獲取處方籤列表
2025-08-07 08:02:01,323 - hospital_system - INFO - 返回 6 張處方籤
2025-08-07 08:02:03,441 - ros2_mock - INFO - 分配藥物中...
2025-08-07 08:02:05,142 - hospital_system - INFO - 開始獲取基本藥物列表
2025-08-07 08:02:05,143 - hospital_system - INFO - 基本藥物列表構建完成，共 7 種藥物
2025-08-07 08:02:05,143 - hospital_system - INFO - 藥物資料已發布到ROS2
2025-08-07 08:02:08,441 - ros2_mock - INFO - 包裝藥物中...
2025-08-07 08:02:08,883 - hospital_system - INFO - 開始獲取基本藥物列表
2025-08-07 08:02:08,884 - hospital_system - INFO - 基本藥物列表構建完成，共 7 種藥物
2025-08-07 08:02:08,884 - hospital_system - INFO - 藥物資料已發布到ROS2
2025-08-07 08:02:11,441 - ros2_mock - INFO - 品質檢查中...
2025-08-07 08:02:12,443 - hospital_system - INFO - 開始獲取基本藥物列表
2025-08-07 08:02:12,444 - hospital_system - INFO - 基本藥物列表構建完成，共 7 種藥物
2025-08-07 08:02:12,444 - hospital_system - INFO - 藥物資料已發布到ROS2
2025-08-07 08:02:13,448 - hospital_system - INFO - ROS2標記訂單完成
2025-08-07 08:02:13,450 - ros2_mock - INFO - 處方籤 6 狀態已自動更新為 completed
2025-08-07 08:02:13,450 - ros2_mock - INFO - 訂單處理完成
2025-08-07 08:02:30,609 - ros2_mock - INFO - 啟動模擬ROS2整合...
2025-08-07 08:02:30,609 - ros2_mock - INFO - 初始化模擬ROS2節點...
2025-08-07 08:02:30,610 - ros2_mock - INFO - 模擬ROS2節點初始化完成
2025-08-07 08:02:30,610 - ros2_mock - INFO - 模擬ROS2整合啟動成功
2025-08-07 08:02:33,209 - hospital_system - INFO - 開始獲取基本藥物列表
2025-08-07 08:02:33,217 - hospital_system - INFO - 基本藥物列表構建完成，共 7 種藥物
2025-08-07 08:02:33,217 - hospital_system - INFO - 藥物資料已發布到ROS2
2025-08-07 08:03:17,748 - hospital_system - ERROR - HTTP錯誤: 400 - 創建失敗: (sqlite3.IntegrityError) UNIQUE constraint failed: medicine_detailed.barcode
[SQL: INSERT INTO medicine_detailed (medicine_id, description, ingredient, category, usage_method, unit_dose, side_effects, storage_conditions, expiry_date, barcode, appearance_type, notes, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (8, '測試描述', '', '', '', 0.0, '', '', '', '', '', '', '2025-08-07 08:03:17.747505', '2025-08-07 08:03:17.747509')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-07 08:03:17,763 - hospital_system - INFO - 開始創建新處方籤
2025-08-07 08:03:17,764 - hospital_system - INFO - 處方包含 1 種藥物
2025-08-07 08:03:17,770 - hospital_system - INFO - 處方籤基本資料已創建，ID: 7, 患者ID: P797764
2025-08-07 08:03:17,774 - hospital_system - INFO - 處方籤創建完成，共添加 1 種藥物
2025-08-07 08:03:17,783 - hospital_system - INFO - 扣減庫存: 阿司匹林 減少 2 (從 89 變為 87)
2025-08-07 08:03:17,786 - hospital_system - INFO - ROS2可用，準備創建訂單
2025-08-07 08:03:17,786 - ros2_mock - INFO - 訂單已加入佇列: ORDER_0007
2025-08-07 08:03:17,786 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: ORDER_0007
2025-08-07 08:03:17,786 - hospital_system - INFO - ROS2訂單已創建: ORDER_0007
2025-08-07 08:03:18,615 - ros2_mock - INFO - 開始處理訂單: ORDER_0007
2025-08-07 08:03:18,615 - ros2_mock - INFO - 驗證處方籤中...
2025-08-07 08:03:20,615 - ros2_mock - INFO - 定位藥物中...
2025-08-07 08:03:23,615 - ros2_mock - INFO - 移動機器人中...
2025-08-07 08:03:27,616 - ros2_mock - INFO - 分配藥物中...
2025-08-07 08:03:32,616 - ros2_mock - INFO - 包裝藥物中...
2025-08-07 08:03:35,616 - ros2_mock - INFO - 品質檢查中...
2025-08-07 08:03:37,621 - hospital_system - INFO - ROS2標記訂單完成
2025-08-07 08:03:37,624 - ros2_mock - INFO - 處方籤 7 狀態已自動更新為 completed
2025-08-07 08:03:37,624 - ros2_mock - INFO - 訂單處理完成
2025-08-07 08:04:48,877 - hospital_system - ERROR - HTTP錯誤: 400 - 創建失敗: (sqlite3.IntegrityError) UNIQUE constraint failed: medicine_detailed.barcode
[SQL: INSERT INTO medicine_detailed (medicine_id, description, ingredient, category, usage_method, unit_dose, side_effects, storage_conditions, expiry_date, barcode, appearance_type, notes, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (8, '修復測試描述', '測試成分', '測試類別', '', 0.0, '', '', '', '', '', '', '2025-08-07 08:04:48.877337', '2025-08-07 08:04:48.877339')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-07 08:04:53,656 - hospital_system - ERROR - HTTP錯誤: 400 - 創建失敗: (sqlite3.IntegrityError) UNIQUE constraint failed: medicine_detailed.barcode
[SQL: INSERT INTO medicine_detailed (medicine_id, description, ingredient, category, usage_method, unit_dose, side_effects, storage_conditions, expiry_date, barcode, appearance_type, notes, created_at, updated_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
[parameters: (8, '修復測試描述', '', '', '', 0.0, '', '', '', '', '', '', '2025-08-07 08:04:53.655462', '2025-08-07 08:04:53.655465')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-08-07 08:05:44,736 - ros2_mock - INFO - 啟動模擬ROS2整合...
2025-08-07 08:05:44,736 - ros2_mock - INFO - 初始化模擬ROS2節點...
2025-08-07 08:05:44,737 - ros2_mock - INFO - 模擬ROS2節點初始化完成
2025-08-07 08:05:44,737 - ros2_mock - INFO - 模擬ROS2整合啟動成功
2025-08-07 08:05:47,386 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: None
2025-08-07 08:06:01,886 - hospital_system - INFO - 開始獲取基本藥物列表
2025-08-07 08:06:01,887 - hospital_system - INFO - 基本藥物列表構建完成，共 8 種藥物
2025-08-07 08:06:01,887 - hospital_system - INFO - 藥物資料已發布到ROS2
2025-08-07 08:06:01,902 - hospital_system - INFO - 開始創建新處方籤
2025-08-07 08:06:01,902 - hospital_system - INFO - 處方包含 1 種藥物
2025-08-07 08:06:01,906 - hospital_system - INFO - 處方籤基本資料已創建，ID: 8, 患者ID: P961902
2025-08-07 08:06:01,908 - hospital_system - INFO - 處方籤創建完成，共添加 1 種藥物
2025-08-07 08:06:01,915 - hospital_system - INFO - 扣減庫存: 阿司匹林 減少 3 (從 87 變為 84)
2025-08-07 08:06:01,917 - hospital_system - INFO - ROS2可用，準備創建訂單
2025-08-07 08:06:01,917 - ros2_mock - INFO - 訂單已加入佇列: ORDER_0008
2025-08-07 08:06:01,917 - ros2_mock - INFO - 向 ROS2 主控制器傳送訂單: ORDER_0008
2025-08-07 08:06:01,917 - hospital_system - INFO - ROS2訂單已創建: ORDER_0008
2025-08-07 08:06:02,739 - ros2_mock - INFO - 開始處理訂單: ORDER_0008
2025-08-07 08:06:02,739 - ros2_mock - INFO - 驗證處方籤中...
2025-08-07 08:06:04,739 - ros2_mock - INFO - 定位藥物中...
2025-08-07 08:06:07,739 - ros2_mock - INFO - 移動機器人中...
2025-08-07 08:06:11,740 - ros2_mock - INFO - 分配藥物中...
2025-08-07 08:06:16,740 - ros2_mock - INFO - 包裝藥物中...
2025-08-07 08:06:19,740 - ros2_mock - INFO - 品質檢查中...
2025-08-07 08:06:21,747 - hospital_system - INFO - ROS2標記訂單完成
2025-08-07 08:06:21,753 - ros2_mock - INFO - 處方籤 8 狀態已自動更新為 completed
2025-08-07 08:06:21,753 - ros2_mock - INFO - 訂單處理完成
2025-08-07 08:06:22,097 - hospital_system - INFO - 開始獲取基本藥物列表
2025-08-07 08:06:22,098 - hospital_system - INFO - 基本藥物列表構建完成，共 8 種藥物
2025-08-07 08:06:22,098 - hospital_system - INFO - 藥物資料已發布到ROS2
2025-08-07 08:06:29,763 - hospital_system - INFO - 開始獲取基本藥物列表
2025-08-07 08:06:29,764 - hospital_system - INFO - 基本藥物列表構建完成，共 8 種藥物
2025-08-07 08:06:29,764 - hospital_system - INFO - 藥物資料已發布到ROS2
